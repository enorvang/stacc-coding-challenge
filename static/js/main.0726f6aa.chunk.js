(this["webpackJsonpstacc-coding-challenge"]=this["webpackJsonpstacc-coding-challenge"]||[]).push([[0],{164:function(e,t,n){e.exports=n(309)},169:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),u=(n(169),n(64)),i=n(42),l=n.n(i),s=n(61),m=n(62),p=n.n(m),d=p.a.create({baseURL:"https://fintech-webinar-2020-api.vercel.app/api",timeout:3e3,headers:{Authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik0wTXhNVEEzTVVFeU5rRkZSREZGTnpSRE1VUXdPVVU0TXpBNFF6QkdRVVF6UkVSRE1VSTNSUSJ9.eyJpc3MiOiJodHRwczovL3N0YWNjeC5ldS5hdXRoMC5jb20vIiwic3ViIjoiejQ0RGdzWVFKREtyNTRCcmZvU0x3c2pLWWRtUDRLdWtAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vc3RhY2MuZmludGVjaCIsImlhdCI6MTYwMTIwNTAwNywiZXhwIjoxNjAzNzk3MDA3LCJhenAiOiJ6NDREZ3NZUUpES3I1NEJyZm9TTHdzaktZZG1QNEt1ayIsImd0eSI6ImNsaWVudC1jcmVkZW50aWFscyJ9.fBvgUGcc1zS3eStbdGo19mLC6KqOdMeBdo_xuZEBz9jCzllRfrgqIhPbys5Se2XreGxu5_6oKWlXbqDOvnbuvjTJKnhoO9Aom1meUjqbQgaROeN0hbmPxVDKF-JDtOdZbAWtZv1ds9bWF0zqo9Z7ogicZ0eUi8FnEA2h2I6peVQPL9cJJwSfhjXPW73Ws4e6c0vynnhXLc5BcQgst0iaMZd4n3tdruzP_bgEY5GqbKvJxHjL2KNHh933VZSZdx_7mf4imsgsed2AL1QkIkqj5lvf_niyzrEmOLs_K_rSOZqRzO0c1u9wxrCK7qlryzpv8nz3C3zXfNdnMQHOejOFpQ")}}),f={getAll:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/accounts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},h=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://api.coingecko.com/api/v3","/ping"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://api.coingecko.com/api/v3","/coins/markets?vs_currency=").concat(t,"&order=market_cap_desc&per_page=100&page=1&sparkline=false"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={pingServer:h,getCoin:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://api.coingecko.com/api/v3","/coins/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllCoinsForCurrency:b,getCoinHistory:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat("https://api.coingecko.com/api/v3","/coins/").concat(t,"/history?date=").concat(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},k=n(310),g=(n(186),new Intl.NumberFormat("no-NO",{style:"currency",currency:"NOK"})),C=[{title:"Name",dataIndex:"name",key:"name"},{title:"Balance",dataIndex:"balanceAmount",key:"balanceAmount",sorter:{compare:function(e,t){return e.balanceAmount-t.balanceAmount},multiple:2}},{title:"NOK Value",dataIndex:"convertedBalance",key:"convertedBalance",sorter:{compare:function(e,t){return e.convertedBalance-t.convertedBalance},multiple:1},defaultSortOrder:"descend",render:function(e){return r.a.createElement("p",null,g.format(e))}},{title:"Market Cap",dataIndex:"marketCap",key:"marketCap",sorter:{compare:function(e,t){return e.marketCap-t.marketCap},multiple:3},render:function(e){return r.a.createElement("p",null,g.format(e))}},{title:"Market Cap Rank",dataIndex:"marketCapRank",key:"marketCapRank",sorter:{compare:function(e,t){return e.marketCapRank-t.marketCapRank},multiple:4}}],y=function(e){var t=e.accounts;return r.a.createElement(k.a,{dataSource:t,columns:C,rowKey:function(e){return e.id},expandable:{expandedRowRender:function(e){return r.a.createElement("p",{style:{margin:0}},"Coin ID: ",e.coinId," ",r.a.createElement("br",null)," Wallet id: ",e.id," ",r.a.createElement("br",null)," Created: ",e.created_at)}}})},O=function(e){var t=e.total;return r.a.createElement("div",null,r.a.createElement("h3",null,"Current total value: ",t))},w=n(311),I=function(e){return e&&e.valueOf()>Date.now()},E=function(e){var t=e.onDateChange,n=e.selectedDate,a=e.historicValue,c=""===n?"":"On ".concat(n,", the account was worth a total of ").concat(a," ");return r.a.createElement("div",null,r.a.createElement("h3",null,"Select date to view historic prices:"),r.a.createElement(w.a,{format:"DD-MM-YYYY",onChange:t,disabledDate:I}),r.a.createElement("p",null,c))},j=new Intl.NumberFormat("no-NO",{style:"currency",currency:"NOK"}),x=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(u.a)(o,2),l=i[0],s=i[1],m=Object(a.useState)(""),p=Object(u.a)(m,2),d=p[0],h=p[1],b=Object(a.useState)(0),k=Object(u.a)(b,2),g=k[0],C=k[1],w=Object(a.useState)([]),I=Object(u.a)(w,2),x=I[0],N=I[1],S=Object(a.useState)(0),R=Object(u.a)(S,2),Z=R[0],V=R[1];Object(a.useEffect)((function(){f.getAll().then((function(e){c(e),console.log(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){v.getAllCoinsForCurrency("nok").then((function(e){return s(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){N(A())}));var A=function(){var e=n.map((function(e){return e.name.substring(0,3).toLowerCase()})),t=l.filter((function(t){return e.includes(t.symbol)})).sort((function(e,t){return e.symbol.localeCompare(t.symbol)})),a=n;a.sort((function(e,t){return e.name.substring(0,3).toLowerCase().localeCompare(t.name.substring(0,3).toLowerCase())}));for(var r=0,c=0;c<t.length;c++){var o=Number(a[c].balance.amount)*t[c].current_price;a[c].convertedBalance=o.toFixed(2),r+=o,a[c].balanceAmount=a[c].balance.amount,a[c].marketCap=t[c].market_cap,a[c].marketCapRank=t[c].market_cap_rank,a[c].coinId=t[c].id}return C(j.format(r)),a},z=function(e){var t=0;if(e)for(var n=function(n){v.getCoinHistory(x[n].coinId,e).then((function(e){var a=e.market_data.current_price.nok*x[n].balanceAmount;t+=a,V(j.format(t))})).catch((function(e){return console.log(e)}))},a=0;a<x.length;a++)n(a);else console.log("cleared date")};return r.a.createElement("div",null,r.a.createElement("div",{style:{padding:"15px"}},r.a.createElement("h1",null,"Stacc Coding Challenge"),r.a.createElement("h2",null,"My Cryptocurrency accounts"),r.a.createElement(E,{onDateChange:function(e,t){console.log(e,t),h(t),z(t)},selectedDate:d,historicValue:Z}),r.a.createElement(O,{total:g})),r.a.createElement(y,{accounts:x}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[164,1,2]]]);
//# sourceMappingURL=main.0726f6aa.chunk.js.map